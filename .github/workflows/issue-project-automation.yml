name: Issue Project Automation
on:
    issues:
        types: [opened]
jobs:
    comment:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout repo
              uses: actions/checkout@v4.1.7
            - name: Comment on new issue
              uses: actions/github-script@v7.0.1
              with:
                  github-token: ${{ secrets.MY_PAT }}
                  script: |
                      const labels = context.payload.issue.labels.map(label => label.name);
                      let comment = '';

                      if (labels.includes('bug')) {
                          comment = '🐛 Thanks for reporting this bug! It has been added to the [project board](https://github.com/users/tommerty/projects/13) for tracking and will be investigated soon.';
                      } else if (labels.includes('enhancement')) {
                          comment = '💡 Thanks for the enhancement suggestion! It has been added to the [project board](https://github.com/users/tommerty/projects/13) for consideration.';
                      } else {
                          comment = '👋 Thanks for reporting! This has been added to the project board for logging and tracking. Be sure to check out the board [here](https://github.com/users/tommerty/projects/13)';
                      }

                      github.rest.issues.createComment({
                        issue_number: context.issue.number,
                        owner: context.repo.owner,
                        repo: context.repo.repo,
                        body: comment
                      })
